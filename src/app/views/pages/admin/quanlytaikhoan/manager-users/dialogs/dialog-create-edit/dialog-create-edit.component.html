<kt-porlet>
  <kt-porlet-body>
    <div class="kt-portlet" [ngClass]="{ 'kt-portlet--body-progress kt-portlet--body-progress-overlay' : viewLoading }">
      <div class="kt-portlet__head kt-portlet__head__custom">
        <div class="kt-portlet__head-label">
          <h3 class="kt-portlet__head-title">Thêm mới/ Chỉnh sửa người dùng</h3>
        </div>
      </div>
      <div class="kt-form">
        <div class="kt-portlet__body">

          <div class="kt-portlet__body-progress">
            <mat-spinner [diameter]="20"></mat-spinner>
          </div>

          <kt-alert *ngIf="hasFormErrors" type="warn" [duration]="30000" [showCloseButton]="true"
            (close)="onAlertClose($event)">
            Oh snap! Change a few things up and try submitting again.
          </kt-alert>

          <mat-tab-group [(selectedIndex)]="selectedTab">
            <mat-tab>
              <ng-template mat-tab-label>
                <i class="mat-tab-label-icon fa fa-user"></i>
                Thông tin cơ bản
              </ng-template>
              <ng-template matTabContent>
                <!--begin::Form-->
                <div *ngIf="user">
                  <form [formGroup]="userForm" class="kt-form kt-form--group-seperator-dashed">

                    <!-- <kt-alert *ngIf="hasFormErrors" type="warn" [showCloseButton]="true" [duration]="10000"
                      (close)="onAlertClose($event)">
                      Oh snap! Change a few things up and try submitting again.
                    </kt-alert> -->
                    <div class="kt-form__section kt-form__section--first" style="padding: 10px;">
                      <div class="form-group kt-form__group row">

                        <div class="col-lg-4 kt-margin-bottom-20-mobile">
                          <mat-form-field class="mat-form-field-fluid">
                            <input matInput placeholder="Enter Full Name" formControlName="fullname" />
                            <mat-error>Full Name is
                              <strong>required</strong>
                            </mat-error>
                            <mat-hint align="start">Please enter
                              <strong>Full Name</strong>
                            </mat-hint>
                          </mat-form-field>
                        </div>

                        <div class="col-lg-4 kt-margin-bottom-20-mobile">
                          <mat-form-field class="mat-form-field-fluid">
                            <input matInput placeholder="So dien thoai" formControlName="phone" />
                            <mat-error>Phone is
                              <strong>required</strong>
                            </mat-error>
                            <mat-hint align="start">Please enter
                              <strong>Phone</strong>
                            </mat-hint>
                          </mat-form-field>
                        </div>

                        <div class="col-lg-4 kt-margin-bottom-20-mobile">
                          <mat-form-field class="mat-form-field-fluid">
                            <input type="email" matInput placeholder="Enter Email" formControlName="email" />
                            <mat-error>Email is
                              <strong>required</strong>
                            </mat-error>
                            <mat-hint align="start">Please enter
                              <strong>Email</strong>
                            </mat-hint>
                          </mat-form-field>
                        </div>
                      </div>

                      <div class="form-group kt-form__group row">

                        <div class="col-lg-4 kt-margin-bottom-20-mobile">
                          <mat-form-field class="mat-form-field-fluid">
                            <input type="email" matInput placeholder="Dia chi" formControlName="address" />
                            <mat-error>Dia chi is
                              <strong>required</strong>
                            </mat-error>
                            <mat-hint align="start">Please enter
                              <strong>Dia chi </strong>
                            </mat-hint>
                          </mat-form-field>
                        </div>
                      </div>


                    </div>
                  </form>
                </div>
                <!--end::Form-->
              </ng-template>
            </mat-tab>

            <mat-tab>
              <ng-template mat-tab-label>
                <i class="mat-tab-label-icon fa fa-user-tag"></i>
                Tham chiếu người giới thiệu
              </ng-template>
              <ng-template matTabContent>
                <!--begin::Form-->
                <form [formGroup]="userFormGT" class="kt-form kt-form--group-seperator-dashed">

                  <div class="kt-form__section kt-form__section--first" style="padding: 10px;">
                    <div class="form-group kt-form__group row">

                      <div class="col-lg-4 kt-margin-bottom-20-mobile">
                        <mat-form-field class="mat-form-field-fluid">
                          <input matInput placeholder="So dien thoai nguoi gioi thieu" formControlName="phone" />
                          <mat-error>Phone is
                            <strong>required</strong>
                          </mat-error>
                          <mat-hint align="start">Please enter
                            <strong>Phone</strong>
                          </mat-hint>
                        </mat-form-field>
                      </div>

                      <div class="col-lg-4 kt-margin-bottom-20-mobile">
                        <button mat-raised-button color="accent">Lấy thông tin</button>
                      </div>

                    </div>

                    <div class="kt-separator kt-separator--dashed"></div>
                    <label>Thông tin người giới thiệu</label>
                    <div class="form-group kt-form__group row">
                      <div class="col-lg-4 kt-margin-bottom-20-mobile">
                        <mat-form-field class="mat-form-field-fluid">
                          <input matInput placeholder="Họ tên" formControlName="username" readonly />
                        </mat-form-field>
                      </div>
                      <div class="col-lg-4 kt-margin-bottom-20-mobile">
                        <mat-form-field class="mat-form-field-fluid">
                          <input matInput placeholder="Email" formControlName="email" readonly />
                        </mat-form-field>
                      </div>
                      <div class="col-lg-4 kt-margin-bottom-20-mobile">
                        <mat-form-field class="mat-form-field-fluid">
                          <input matInput placeholder="Địa chỉ" formControlName="address" readonly />
                        </mat-form-field>
                      </div>
                    </div>
                  </div>
                </form>
                <!--end::Form-->
              </ng-template>
            </mat-tab>


            <mat-tab *ngIf="user">
              <ng-template mat-tab-label>
                <i class="mat-tab-label-icon fa fa-unlock"></i>
                Cấp quyền
              </ng-template>
              <ng-template matTabContent>
                <mat-form-field>
                  <mat-label>Chọn quyền</mat-label>
                  <mat-select [(ngModel)]="selectedRole" name="food">
                    <mat-option *ngFor="let role of roles" [value]="role">
                      {{role}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </ng-template>
            </mat-tab>

            <mat-tab *ngIf="user" [disabled]="!user || !user.id">
              <ng-template mat-tab-label>
                <i class="mat-tab-label-icon fa fa-exchange-alt"></i>
                Change password
              </ng-template>
              <ng-template matTabContent>
                <kt-change-password [userId]="user.id"></kt-change-password>
              </ng-template>
            </mat-tab>
          </mat-tab-group>
        </div>
        <div class="kt-separator kt-separator--dashed"></div>

        <div class="kt-portlet__foot kt-portlet__no-border kt-portlet__foot--fit">
          <div class="kt-form__actions kt-form__actions--solid">
            <div class="row text-right">
              <div class="col-lg-12">
                <button type="button" mat-raised-button [mat-dialog-close]="data.animal" cdkFocusInitial
                  matTooltip="Hủy bỏ">
                  Cancel
                </button>&nbsp;
                <button type="button" mat-raised-button color="primary" (click)="onSubmit()" [disabled]="viewLoading"
                  matTooltip="Kích hoạt">
                  Save
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </kt-porlet-body>
</kt-porlet>